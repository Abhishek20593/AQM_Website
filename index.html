<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <meta http-equiv="refresh" content="120"> -->
    <title>Air Quality Monitoring</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
     <div class="intro-text">
     <h3 style="text-align: center; background-color: goldenrod; font-size: 40px;">AIR QUALITY MONITORING</h3>
     <p style="text-align: justify; background-color: rgb(118, 215, 196)"><span style="font-weight: bolder; background-color:rgb(192, 57, 43);">About the Project:</span> Air Quality Monitoring is performed by using MSP430 Low-power Microcontroller and Bluetooth HC-05. By using this Web application, we are monitoring Ambient Temperature, Carbon monoxide, Smoke (Air Quality), PM2.5, and PM10. This is developing and maintaining by the 'Bioelectronics Innovation Laboratory', Department of Electronics and Electrical Communication Engineering (E&ECE), Indian Institute of Technology Kharagpur, Kharagpur-721302, West Bengal, India. </p>
     </div>

     <p style="font-size: 18px;">(Enter date in the format <strong>DD/MM/YYYY</strong>. If date is <strong>5th January, 2021</strong> then enter <strong>05/01/2021</strong>).</p>
     <form class="time-date-selector" style="font-size: 25px;">
         <label for="date">Enter Date: </label> 
         <input type="text" placeholder="DD/MM/YYYY" id="date" style="font-size: 25px; background-color: linen;"> 
         <button onclick="getData(event)" style="font-size: 25px; background-color: salmon; text-decoration-color: black;">Submit</button>
     </form>
     <div class="data-container">
        <div class="loader"></div>
        <table id="data" style="width: 100%;">
            <tr>
                <th class="td">Timestamp</th>
                <th class="temp">Temperature (&deg;C)</th>
                <th class="co">CO (PPB)</th>
                <th class="aq">Air_Quality[Smoke] (PPM)</th>
                <th class="pm25">PM2.5 (ug/m^3)</th>
                <th class="pm10">PM10 (ug/m^3)</th>
            </tr>
        </table>

     </div>
     <div class="show-graph-btns">

        <button id="show-aq" onclick="draw_aq_graph()" style="font-size: 20px; background-color: violet;">Click to Show Air Quality (Smoke) Graph</button>
        <button id="show-pm2" onclick="draw_pm2_graph()" style="font-size: 20px; background-color: mediumseagreen;">Click to Show PM2.5 Graph</button>
        <button id="show-pm10" onclick="draw_pm10_graph()" style="font-size: 20px; background-color: mediumturquoise">Click to Show PM10 Graph</button>
        <button id="show-co" onclick="draw_co_graph()" style="font-size: 20px; background-color:peru;">Click to Show CO graph</button>
        <button id="show-temp" onclick="draw_temp_graph()" style="font-size: 20px; background-color:sandybrown;">Click to Show Temperature graph</button>
        
    </div>

    <div class="graphs">
       <canvas id="aq"></canvas> 
       <canvas id="pm2"></canvas>
       <canvas id="pm10"></canvas>
        <canvas id="co"></canvas>   
       <canvas id="temp"></canvas>
    </div>

     <button onclick="signOut()" class="logout">LOG OUT</button>
</body>

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>

<script>
// Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyAKujIgveiaIAN2VCbln34UfgjPLpoDs8Q",
    authDomain: "bluetooth-aqm-iit-kgp-2020.firebaseapp.com",
    databaseURL: "https://bluetooth-aqm-iit-kgp-2020-default-rtdb.firebaseio.com",
    projectId: "bluetooth-aqm-iit-kgp-2020",
    storageBucket: "bluetooth-aqm-iit-kgp-2020.appspot.com",
    messagingSenderId: "817769544752",
    appId: "1:817769544752:web:6b83230b96f203a13541f5",
};
// Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    
    firebase.auth().onAuthStateChanged((user) => {
    // console.log(user)
    if(user){
        // getData()
        getLocation()
    }else{
        console.log("Not logged in index.html")
        location.href = "signIn.html"
    }
})
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.0/dist/Chart.min.js"></script>
<script src="./index.js"></script>
</html>
