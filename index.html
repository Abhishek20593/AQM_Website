<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="120">
    <title>Air Quality Monitoring</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
     <div class="intro-text">
     <h3>AIR QUALITY MONITORING</h3>
     <h4>About the page</h4>
     <p>Air Quality Monitoring is performed by using MSP430 Low-power Microcontroller and Bluetooth HC-05. By using this Web application, we are monitoring Ambient Temperature, Carbon monoxide, Smoke (Air Quality), PM2.5, and PM10. This is developing and maintaining by the 'Bioelectronics Innovation Laboratory', Department of Electronics and Electrical Communication Engineering (E&ECE), Indian Institute of Technology Kharagpur, Kharagpur-721302, West Bengal, India. </p>
     </div>
     <h1>Realtime Monitoring</h1>

     <div class="time-date-selector">
     <P>DATE: <input type="text" placeholder="DD/MM/YYYY" id="date"></P> 

     </div>
     <div class="data-container">
        <table id="data" style="width: 100%;">
            <tr>
                <th>Timestamp</th>
                <th>Temperature (&deg;C)</th>
                <th>CO (PPB)</th>
                <th>Air_Quality[Smoke] (PPM)</th>
                <th>PM2.5 (ug/m^3)</th>
                <th>PM10 (ug/m^3)</th>
            </tr>
        </table>

     </div>
     <div class="show-graph-btns">
        <button id="show-temp" onclick="draw_temp_graph()">Click to Show Temperature graph</button>
        <button id="show-co" onclick="draw_co_graph()">Click to Show CO graph</button>
        <button id="show-aq" onclick="draw_aq_graph()">Click to Show air_quality_smoke graph</button>
        <button id="show-pm2" onclick="draw_pm2_graph()">Click to Show PM2.5 graph</button>
        <button id="show-pm10" onclick="draw_pm10_graph()">Click to Show PM10 graph</button>
    </div>

    <div class="graphs">
       <canvas id="temp" height="500" width="1000"></canvas>
       <canvas id="co" height="500" width="1000"></canvas>
       <canvas id="aq" height="500" width="1000"></canvas>
       <canvas id="pm2" height="500" width="1000"></canvas>
       <canvas id="pm10" height="500" width="1000"></canvas>
    </div>

     <button onclick="signOut()">Log out</button>
</body>

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>

<script>
// Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyAKujIgveiaIAN2VCbln34UfgjPLpoDs8Q",
    authDomain: "bluetooth-aqm-iit-kgp-2020.firebaseapp.com",
    databaseURL: "https://bluetooth-aqm-iit-kgp-2020-default-rtdb.firebaseio.com",
    projectId: "bluetooth-aqm-iit-kgp-2020",
    storageBucket: "bluetooth-aqm-iit-kgp-2020.appspot.com",
    messagingSenderId: "817769544752",
    appId: "1:817769544752:web:6b83230b96f203a13541f5",
};
// Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    
    firebase.auth().onAuthStateChanged((user) => {
    // console.log(user)
    if(user){
        getData()
        getLocation()
    }else{
        console.log("Not logged in index.html")
        location.href = "signIn.html"
    }
})
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.0/dist/Chart.min.js"></script>
<script src="./index.js"></script>
</html>
